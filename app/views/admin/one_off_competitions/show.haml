%h1 Competition #{competition.id}
= "#{competition.state}"

- competition.players.each_with_index do |player, i|
  = "#{i + 1}. #{player.name}"

.form
  = form_tag(admin_one_off_competition_players_path(competition.id), method: :create) do
    = label_tag(:competitor_name, 'Name')
    = text_field_tag('competitor[name]')
    = submit_tag('Add Player')

- unless competition.started?
  = button_to 'Start Competition', admin_one_off_competition_state_path(competition.id), method: :post

- if competition.started?
  .form
    = form_tag(admin_one_off_competition_points_path(competition.id), method: :create) do
      = label_tag(:player, 'Player')
      = select_tag(:player, options_from_collection_for_select(competition.players, :id, :name))
      = label_tag(:points, 'Points')
      = text_field_tag('points')
      = submit_tag('Add')

  - competition.players.each do |player|
    = "#{player.name}: #{pluralize(player.points, 'point')}"

  = button_to 'Finish Competition', admin_one_off_competition_state_path(competition.id), method: :delete

- if competition.finished?
  = "#{competition.winning_player.name} wins"
